import time
from playwright.sync_api import sync_playwright

keystroke_seq = [
    # Level 1
    "Space",
    "d",
    "d",
    "d",
    "d",
    "d",
    "d",
    "w",
    "d",
    "w",
    "d",
    "w",
    "d",
    "d",
    "d",
    "d",
    "d",
    "d",
    "d",
    "d",
    "w",
    "d",
    "d",
    "d",
    "new_level",
    # Level 2
    "d",
    "d",
    "d",
    "d",
    "d",
    "d",
    "d",
    "w",
    "d",
    "w",
    "d",
    "d",
    "r",
    "d",
    "d",
    "d",
    "d",
    "r",
    "d",
    "d",
    "d",
    "w",
    "d",
    "w",
    "a",
    "a",
    "a",
    "w",
    "a",
    "w",
    "a",
    "w",
    "a",
    "w",
    "d",
    "d",
    "d",
    "w",
    "d",
    "w",
    "a",
    "a",
    "a",
    "a",
    "a",
    "a",
    "a",
    "a",
    "r",
    "a",
    "a",
    "a",
    "a",
    "a",
    "a",
    "w",
    "a",
    "w",
    "a",
    "w",
    "d",
    "d",
    "d",
    "w",
    "d",
    "w",
    "d",
    "d",
    "d",
    "d",
    "d",
    "d",
    "d",
    "d",
    "d",
    "w",
    "d",
    "w",
    "d",
    "d",
    "w",
    "d",
    "w",
    "d",
    "w",
    "a",
    "a",
    "a",
    "a",
    "a",
    "a",
    "a",
    "a",
    "a",
    "a",
    "a",
    "a",
    "a",
    "a",
    "a",
    "r",
    "a",
    "r",
    "a",
    "a",
    "w",
    "a",
    "w",
    "d",
    "d",
    "w",
    "d",
    "w",
    "a",
    "a",
    "w",
    "a",
    "w",
    "d",
    "d",
    "w",
    "d",
    "w",
    "d",
    "w",
    "d",
    "d",
    "r",
    "r",
    "r",
    "d",
    "d",
    "r",
    "d",
    "d",
    "w",
    "d",
    "d",
    "w",
    "d",
    "w",
    "a",
    "a",
    "w",
    "a",
    "w",
    "d",
    "d",
    "d",
    "d",
    "d",
    "w",
    "d",
    "d",
    "d",
    "d",
]


def main():
    with sync_playwright() as p:
        browser = p.chromium.launch(headless=False)
        page = browser.new_page()
        page.goto(
            "https://cspages.ucalgary.ca/~aycock/599.82/vic20/?file=https://cspages.ucalgary.ca/~daniel.sabourov/out.prg"
        )
        time.sleep(6)

        for key in keystroke_seq:
            if key == "new_level":
                time.sleep(0.3)
                continue

            if key == "r":
                time.sleep(0.1)

            page.keyboard.press(key)
            time.sleep(0.1)

        time.sleep(10)

        browser.close()


if __name__ == "__main__":
    main()
